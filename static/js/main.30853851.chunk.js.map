{"version":3,"sources":["App.jsx","index.jsx"],"names":["App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","currentFamily","currentModel","index","label","f","models","find","m","ev","family","getFamilyByLabel","target","value","model","setState","window","location","search","concat","id","getModelByLabel","fetch","res","ok","json","_this2","configL2D","modelTag","URLSearchParams","get","keys","args","split","initL2D","prefix","width","height","hOffset","vOffset","scale","_this3","currentLabel","react_default","a","createElement","htmlFor","className","onChange","e","handleFamilyChange","map","key","_this4","handleModelChange","renderFamilySelector","renderModelSelector","basePath","cid","jsonPath","L2Dwidget","init","display","name","canvas","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.30853851.chunk.js","sourcesContent":["import React from 'react';\nimport { L2Dwidget } from 'live2d-widget';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentFamily: null,\n      currentModel: null,\n      index: null\n    };\n  }\n\n  // Globally loads Live2D\n  static initL2D(basePath, prefix, width, height, hOffset, vOffset, scale, cid) {\n    if (prefix) prefix += '.';\n    else prefix = '';\n    const jsonPath = `${basePath}/${prefix}model.json`;\n    L2Dwidget.init({\n      model: {jsonPath, scale},\n      display: {width, height, hOffset, vOffset},\n      name: {canvas: cid}\n    });\n  }\n\n  // Returns string\n  getFamilyByLabel(label) {\n    for (const f in this.state.index) {\n      if (this.state.index[f].label === label) return f;\n    }\n    return null;\n  }\n\n  // Returns object\n  getModelByLabel(label) {\n    return this.state.index[this.state.currentFamily].models\n      .find(m => m.label === label);\n  }\n\n  // On select family\n  handleFamilyChange(ev) {\n    const family = this.getFamilyByLabel(ev.target.value);\n    if (family === this.state.currentFamily) return;\n    const model = this.state.index[family].models[0];\n    this.setState({currentFamily: family, currentModel: model});\n    window.location.search = `?model=${family}-${model.id}`;\n  }\n\n  // On select model\n  handleModelChange(ev) {\n    const model = this.getModelByLabel(ev.target.value);\n    if (model.id === this.state.currentModel.id) return;\n    this.setState({currentModel: model});\n    window.location.search = `?model=${this.state.currentFamily}-${model.id}`;\n  }\n\n  async componentWillMount() {\n    const res = await fetch('./json/index.json');\n    const index = res.ok ? await res.json() : null;\n    return this.setState({index}, () => this.configL2D());\n  }\n\n  configL2D() {\n    const params = new URLSearchParams(window.location.search);\n    const modelTag = params.get('model');\n    let family = Object.keys(this.state.index)[0];\n    let model = this.state.index[family].models[0];\n\n    if (modelTag) {\n      const args = modelTag.split('-');\n      if (args[0] && args[1]) {\n        family = args[0];\n        model = this.state.index[family].models.find(m => m.id === args[1]);\n      }\n    }\n\n    this.setState({currentFamily: family, currentModel: model});\n    return App.initL2D(\n      `./models/${family}/${model.id}`,\n      model.prefix,\n      this.state.index[family].width,\n      this.state.index[family].height,\n      this.state.index[family].hOffset,\n      this.state.index[family].vOffset,\n      this.state.index[family].scale,\n      `l2d-${family}-${model.id}`\n    );\n  }\n\n  renderFamilySelector() {\n    const currentLabel = this.state.index[this.state.currentFamily].label;\n    return (<p>\n      <label htmlFor=\"select\">Family:</label>\n      <select value={currentLabel} className=\"full\" id=\"selectf\"\n        onChange={e => this.handleFamilyChange(e)}>\n        {\n          Object.keys(this.state.index)\n            .map(f => <option key={f}>{this.state.index[f].label}</option>)\n        }\n      </select>\n    </p>);\n  }\n\n  renderModelSelector() {\n    return (<p>\n      <label htmlFor=\"select\">Model:</label>\n      <select value={this.state.currentModel.label}\n        className=\"full\" id=\"selectm\"\n        onChange={e => this.handleModelChange(e)}>\n        {\n          this.state.index[this.state.currentFamily].models\n            .map(m => <option key={m.id}>{m.label}</option>)\n        }\n      </select>\n    </p>);\n  }\n\n  render() {\n    if (!this.state.index || !this.state.index[this.state.currentFamily]) {\n      return <div><h1>Loading...</h1></div>;\n    }\n\n    return (<div>\n      <h1>Cardinal</h1>\n      <p>Live2D x ReactJS!</p>\n      <h2>Configuration</h2>\n      <form>\n        <fieldset>\n          <legend>Settings</legend>\n          {this.renderFamilySelector()}\n          {this.renderModelSelector()}\n        </fieldset>\n      </form>\n    </div>);\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport 'yorha/dist/yorha.min.css';\n\nReactDOM.render(<App/>, document.getElementById('root'));\n"],"sourceRoot":""}